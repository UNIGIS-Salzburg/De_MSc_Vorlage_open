\documentclass[]{book}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\usepackage{fixltx2e} % provides \textsubscript
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
\else % if luatex or xelatex
  \ifxetex
    \usepackage{mathspec}
  \else
    \usepackage{fontspec}
  \fi
  \defaultfontfeatures{Ligatures=TeX,Scale=MatchLowercase}
\fi
% use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
% use microtype if available
\IfFileExists{microtype.sty}{%
\usepackage{microtype}
\UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\usepackage[margin=1in]{geometry}
\usepackage{hyperref}
\hypersetup{unicode=true,
            pdftitle={Formatvorlage UNIGIS MSc},
            pdfauthor={Christian Neuwirth},
            pdfborder={0 0 0},
            breaklinks=true}
\urlstyle{same}  % don't use monospace font for urls
\usepackage{natbib}
\bibliographystyle{apalike}
\usepackage{longtable,booktabs}
\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
\IfFileExists{parskip.sty}{%
\usepackage{parskip}
}{% else
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt plus 2pt minus 1pt}
}
\setlength{\emergencystretch}{3em}  % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{5}
% Redefines (sub)paragraphs to behave more like sections
\ifx\paragraph\undefined\else
\let\oldparagraph\paragraph
\renewcommand{\paragraph}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
\let\oldsubparagraph\subparagraph
\renewcommand{\subparagraph}[1]{\oldsubparagraph{#1}\mbox{}}
\fi

%%% Use protect on footnotes to avoid problems with footnotes in titles
\let\rmarkdownfootnote\footnote%
\def\footnote{\protect\rmarkdownfootnote}

%%% Change title format to be more compact
\usepackage{titling}

% Create subtitle command for use in maketitle
\newcommand{\subtitle}[1]{
  \posttitle{
    \begin{center}\large#1\end{center}
    }
}

\setlength{\droptitle}{-2em}

  \title{Formatvorlage UNIGIS MSc}
    \pretitle{\vspace{\droptitle}\centering\huge}
  \posttitle{\par}
  \subtitle{Subtitle}
  \author{Christian Neuwirth}
    \preauthor{\centering\large\emph}
  \postauthor{\par}
      \predate{\centering\large\emph}
  \postdate{\par}
    \date{2018-11-30}

\usepackage{booktabs}
\usepackage{longtable}
\usepackage{framed,color}
\usepackage{pdfpages}
\definecolor{shadecolor}{RGB}{248,248,248}

% \ifxetex
  % \usepackage{letltxmacro}
  % \setlength{\XeTeXLinkMargin}{1pt}
  % \LetLtxMacro\SavedIncludeGraphics\includegraphics
  % \def\includegraphics#1#{% #1 catches optional stuff (star/opt. arg.)
    % \IncludeGraphicsAux{#1}%
  % }%
  % \newcommand*{\IncludeGraphicsAux}[2]{%
    % \XeTeXLinkBox{%
      % \SavedIncludeGraphics#1{#2}%
    % }%
  % }%
% \fi

\newenvironment{rmdblock}[1]
  {\begin{shaded}
  \begin{itemize}
  \renewcommand{\labelitemi}{
    \raisebox{-.7\height}[0pt][0pt]{
      {\setkeys{Gin}{width=2em,keepaspectratio}\includegraphics{images/icons/#1}}
    }
  }
  \item
  }
  {
  \end{itemize}
  \end{shaded}
  }
\newenvironment{rmdcaution}
  {\begin{rmdblock}{caution2}}
  {\end{rmdblock}}
\newenvironment{rmdinsight}
  {\begin{rmdblock}{insight2}}
  {\end{rmdblock}}
\newenvironment{rmdexercise}
  {\begin{rmdblock}{exercise2}}
  {\end{rmdblock}}
\newenvironment{rmdtip}
  {\begin{rmdblock}{tip2}}
  {\end{rmdblock}}
\newenvironment{rmdcomment}
  {\begin{rmdblock}{comment}}
  {\end{rmdblock}}
  
%command maketitle is saved as oldmaketitle
%the original maketitle command is turned off to prevent it from execution prior to inserting the frontpage pdf
\let\oldmaketitle\maketitle
\AtBeginDocument{\let\maketitle\relax}

\usepackage{amsthm}
\newtheorem{theorem}{Theorem}[chapter]
\newtheorem{lemma}{Lemma}[chapter]
\theoremstyle{definition}
\newtheorem{definition}{Definition}[chapter]
\newtheorem{corollary}{Corollary}[chapter]
\newtheorem{proposition}{Proposition}[chapter]
\theoremstyle{definition}
\newtheorem{example}{Example}[chapter]
\theoremstyle{definition}
\newtheorem{exercise}{Exercise}[chapter]
\theoremstyle{remark}
\newtheorem*{remark}{Remark}
\newtheorem*{solution}{Solution}
\let\BeginKnitrBlock\begin \let\EndKnitrBlock\end
\begin{document}
\maketitle

%this gets xecuted before the body (see _output.yml)
%maketitle is turned off in preamble_nonpar.tex

\thispagestyle{empty}
\begin{center}
%{\Huge A BOOK}
\includegraphics[width=\textwidth,height=\textheight,keepaspectratio]{cover/UNIGIS_Salzburg_Schriftlogo.pdf}
%{\huge by Me}
\end{center}

%the original title the maketitle command gets recovered and executed after the fronpage was executed
\let\maketitle\oldmaketitle
\maketitle

{
\setcounter{tocdepth}{1}
\tableofcontents
}
\chapter*{Welcome}\label{welcome}
\addcontentsline{toc}{chapter}{Welcome}

bla bla bla

Good luck and have fun!

\chapter{Some formatting examples}\label{some-formatting-examples}

\section{Block formatting}\label{block-formatting}

\BeginKnitrBlock{rmdcomment}
This is a comment block
\EndKnitrBlock{rmdcomment}

\BeginKnitrBlock{rmdcaution}
This is a caution block
\EndKnitrBlock{rmdcaution}

\BeginKnitrBlock{rmdinsight}
This is an insight block.
\EndKnitrBlock{rmdinsight}

\BeginKnitrBlock{rmdexercise}
This is an exercise block.
\EndKnitrBlock{rmdexercise}

\BeginKnitrBlock{rmdtip}
This is a tip block.
\EndKnitrBlock{rmdtip}

\section{Videos}\label{videos}

\BeginKnitrBlock{rmdcaution}
videos embeded based on html syntax (see above) are not displayed in the
PDF.
\EndKnitrBlock{rmdcaution}

\section{Images}\label{images}

\begin{figure}

{\centering \includegraphics[width=0.8\linewidth]{images/example-images2} 

}

\caption{This is R Syntax}\label{fig:fig13}
\end{figure}

This is a reference to Fig. \ref{fig:fig13}.

\begin{figure}
\centering
\includegraphics[width=4.79167in,height=3.28125in]{images/example-images2.jpg}
\caption{This is Rmarkdown Syntax}
\end{figure}

\BeginKnitrBlock{rmdcaution}
Image referencing is not possible by means of RMarkdown syntax.
\EndKnitrBlock{rmdcaution}

\BeginKnitrBlock{rmdtip}
It is advisable to stick to a syntax within a document (Rmarkdown or R).
\EndKnitrBlock{rmdtip}

\section{Headlines}\label{headlines}

\begin{itemize}
\tightlist
\item
  Heading 1 - \textless{}\#Heading Title\textgreater{}
\item
  Heading 2 - \textless{}\#\#Heading Title\textgreater{}
\item
  Heading 3 - \textless{}\#\#\#Heading Title\textgreater{}
\item
  Heading without numbering - \textless{}\# Title \{-\}\textgreater{}
\item
  Appendix - \textless{}\#\# (APPENDIX) Appendix \{-\}\textgreater{}
\end{itemize}

\section{Referencing}\label{referencing}

\BeginKnitrBlock{rmdtip}
The reference list in html is generated by means of an r statement (see
04-references.Rmd). YAML Metadata parameters in index.Rmd are used to
render the reference list in PDF. If ``link-citations: yes'' is enabled,
reference list will be added to the end of every chapter (not
alphabetical!).
\EndKnitrBlock{rmdtip}

\citep{holland1992}

some text bla bla \citep{alexandrowicz1980}.

\citep{grimm2005}

some text bla bla \citet{eden1961}.

\section{CSS Text formatting}\label{css-text-formatting}

{Pay attention to this!}

\BeginKnitrBlock{rmdcomment}
The css class ``emphasized'' is defined in css/custom.css and may be
applied to text and headlines using HTML tags. Classes assigned to
headlines are applied in the entire chaper.More information on css
customization in BookDown is available
\href{https://bookdown.org/yihui/rmarkdown/custom-css-1.html}{here}.
Formats based on css are not rendered in the PDF!
\EndKnitrBlock{rmdcomment}

\chapter{Introduction to
Bookdownplus}\label{introduction-to-bookdownplus}

The R package \texttt{bookdownplus} \citep{R-bookdownplus} is an
extension of \texttt{bookdown} \citep{R-bookdown}. It is a collection of
multiple templates on the basis of LaTeX, which are tailored so that I
can work happily under the umbrella of \texttt{bookdown}.
\texttt{bookdownplus} helps you write academic journal articles, guitar
books, chemical equations, mails, calendars, and diaries.

\BeginKnitrBlock{rmdcomment}
This is a comment block
\EndKnitrBlock{rmdcomment}

\BeginKnitrBlock{rmdcaution}
This is a caution block
\EndKnitrBlock{rmdcaution}

\BeginKnitrBlock{rmdinsight}
This is an insight block.
\EndKnitrBlock{rmdinsight}

\BeginKnitrBlock{rmdexercise}
This is an exercise block.
\EndKnitrBlock{rmdexercise}

\BeginKnitrBlock{rmdtip}
This is a tip block.
\EndKnitrBlock{rmdtip}

\section{Features}\label{features}

\texttt{bookdownplus} extends the features of \texttt{bookdown}, and
simplifies the procedure. Users only have to choose a template, clarify
the book title and author name, and then focus on writing the text. No
need to struggle in YAML and LaTeX.

With \texttt{bookdownplus} users can

\begin{itemize}
\item
  record guitar chords,
\item
  write a mail in an elegant layout,
\item
  write a laboratory journal, or a personal diary,
\item
  draw a monthly or weekly or conference calendar,
\item
  and, of course, write academic articles in your favourite way,
\item
  with chemical molecular formulae and equations,
\item
  even in Chinese,
\item
  and more wonders will come soon.
\end{itemize}

Full documentation can be found in the book
\href{https://bookdown.org/baydap/bookdownplus}{R bookdownplus
Textbook}. The webpage looks so-so, while the
\href{https://bookdown.org/baydap/bookdownplus/bookdownplus.pdf}{pdf
file} might give you a little surprise.

\section{Quick start}\label{quick-start}

Although this section might not be the latest version, the general idea
won't change. Please see
\href{https://bookdown.org/baydap/bookdownplus}{R bookdownplus Textbook}
to keep up with the update.

\subsection{Preparation}\label{preparation}

Before starting, you have to install R, RStudio, bookdown package, and
other software and packages (i.e.~Pandoc, LaTeX, rmarkdown, rticle,
knitr, etc.) which bookdown depends on. See the official
\href{https://bookdown.org/yihui/bookdown/}{manual} of bookdown for
details. Additionally, if you want to produce a poster, phython must be
installed before using, and the path of phython might have to be added
to the environmental variables for Windows users.

\subsection{Installation}\label{installation}

\begin{verbatim}
install.package("bookdownplus")
# or
devtools::
  install_github("pzhaonet/bookdownplus")
\end{verbatim}

\subsection{Generate demo files}\label{generate-demo-files}

Run the following codes, and you will get some files (e.g.
\texttt{index.Rmd}, \texttt{body.Rmd}, \texttt{bookdownplus.Rproj}) and
folders in your working directory.

\begin{verbatim}
getwd() # this is your working directory. run setwd() to change it.
bookdownplus::bookdownplus()
\end{verbatim}

\subsection{Build a demo book}\label{build-a-demo-book}

Now open \texttt{bookdownplus.Rproj} with RStudio, and press
\texttt{ctrl+shift+b} to compile it. Your will get a book file named
\texttt{*.pdf} in \texttt{\_book/}folder.

\subsection{Write your own}\label{write-your-own}

Write your own text in \texttt{index.Rmd} and \texttt{body.Rmd}, and
build your own lovely book.

\subsection{More outputs}\label{more-outputs}

By default, the book is in a pdf file. From `bookdownplus' 1.0.3, users
can get more output formats, including `word', `html' and `epub'. Run:

\begin{verbatim}
bookdownplus::
  bookdownplus(template = 'article', 
               more_output = c('html', 'word', 'epub'))
\end{verbatim}

\subsection{Recommendations}\label{recommendations}

I have been developing some other packages, which bring more features
into `bookdown', such as:

\begin{itemize}
\item
  mindr \citep{R-mindr}, which can extract the outline of your book and
  turn it into a mind map, and
\item
  pinyin \citep{R-pinyin}, which can automatically generate
  \href{https://bookdown.org/yihui/bookdown/cross-references.html}{`\{\#ID\}'}
  of the chapter headers even if there are Chinese characters in them.
\end{itemize}

Both of them have been released on CRAN and can be installed via:

\begin{verbatim}
install.packages('mindr')
install.packages('pinyin')
\end{verbatim}

Enjoy your bookdowning!

\subsection{Models}\label{models}

Eq. \eqref{eq:mc2} is an equation.

\begin{equation} 
E = mc^2
  \label{eq:mc2}
\end{equation}

It can be written as \(E = mc^2\).

\BeginKnitrBlock{theorem}
\protect\hypertarget{thm:lik}{}{\label{thm:lik} }This is a theorem.
\EndKnitrBlock{theorem} \BeginKnitrBlock{proof}

\iffalse{} {Proof. } \fi{}This is a proof.
\EndKnitrBlock{proof}

\BeginKnitrBlock{exercise}
\protect\hypertarget{exr:unnamed-chunk-17}{}{\label{exr:unnamed-chunk-17}
}This is an exercise
\EndKnitrBlock{exercise}

\section{Results}\label{results}

Fig. \ref{fig:fig1} psum dolor sit amet, consectetur adipiscing elit,
sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.

\begin{figure}

{\centering \includegraphics[width=0.8\linewidth]{De_MSc_vorlage_files/figure-latex/fig1-1} 

}

\caption{caption}\label{fig:fig1}
\end{figure}

Tab. \ref{tab:tab1} psum dolor sit amet, consectetur adipiscing elit,
sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.

\begin{table}

\caption{\label{tab:tab1}Here is a nice table!}
\centering
\begin{tabular}[t]{rrrrl}
\toprule
Sepal.Length & Sepal.Width & Petal.Length & Petal.Width & Species\\
\midrule
5.1 & 3.5 & 1.4 & 0.2 & setosa\\
4.9 & 3.0 & 1.4 & 0.2 & setosa\\
4.7 & 3.2 & 1.3 & 0.2 & setosa\\
4.6 & 3.1 & 1.5 & 0.2 & setosa\\
5.0 & 3.6 & 1.4 & 0.2 & setosa\\
\addlinespace
5.4 & 3.9 & 1.7 & 0.4 & setosa\\
4.6 & 3.4 & 1.4 & 0.3 & setosa\\
5.0 & 3.4 & 1.5 & 0.2 & setosa\\
4.4 & 2.9 & 1.4 & 0.2 & setosa\\
4.9 & 3.1 & 1.5 & 0.1 & setosa\\
\addlinespace
5.4 & 3.7 & 1.5 & 0.2 & setosa\\
4.8 & 3.4 & 1.6 & 0.2 & setosa\\
4.8 & 3.0 & 1.4 & 0.1 & setosa\\
4.3 & 3.0 & 1.1 & 0.1 & setosa\\
5.8 & 4.0 & 1.2 & 0.2 & setosa\\
\addlinespace
5.7 & 4.4 & 1.5 & 0.4 & setosa\\
5.4 & 3.9 & 1.3 & 0.4 & setosa\\
5.1 & 3.5 & 1.4 & 0.3 & setosa\\
5.7 & 3.8 & 1.7 & 0.3 & setosa\\
5.1 & 3.8 & 1.5 & 0.3 & setosa\\
\bottomrule
\end{tabular}
\end{table}

\section{Conclusions}\label{conclusions}

Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim
veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea
commodo consequat. Duis aute irure dolor in reprehenderit in voluptate
velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint
occaecat cupidatat non proident, sunt in culpa qui officia deserunt
mollit anim id est laborum

\chapter{Sandbox}\label{sandbox}

Use this section for testing!

This is a reference to Fig. \ref{fig:fig13}.

\bibliography{bib/bib.bib}


\end{document}
